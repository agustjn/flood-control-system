{% extends "layout.html" %}
{% from "paginate.html" import render_paginate with context %}
{% block title %}Consultas{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}

  <h1>Reportes </h1>


<form class="row g-2" action="{{url_for('report_index') }}" method="GET">
  <div class="col-3 p-2 m-1 " >
    {% if texto %}
        <input  type="text" name="texto_id" placeholder={{texto}}>
    {% else %}
        <input  type="text" name="texto_id" placeholder="Ingrese el titulo de la denuncia">
    {% endif %}
  </div>

  <div class="col-2 p-1 m-1">
    <select name="status_id" class="form-select " id="status_id">
        <option >{{filtro}}</option>
        <option >{{values[0]}}</option>
        <option >{{values[1]}}</option>
        <option >{{values[2]}}</option>
        <option >{{values[3]}}</option>
    </select>
</div>
<button class=" p-1 col-2 btn btn-outline-danger btn-lg " type="submit">Filtrar</button>
</form>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Titulo</th>
        <th scope="col">Fecha de creacion</th>
        <th scope="col">Usuario Asignado</th>
        <th scope="col">Estado</th>


      </tr>
    </thead>
    <tbody>
      {% for report in reportes.items %}
      <tr>
        <th scope="row">{{loop.index}}</th>
        <td>{{ report.title }}</td>
        <td>{{ report.creation_date }}</td>
        <td>{{ report.user_assing.username}}</td>
        <td>{{ report.status}}</td>

        <td>
          <a href="{{ url_for('report_delete',report_id = report.id) }}" class="btn btn-secondary btn-sm"
            onclick="return confirm('Â¿Estas seguro de eliminar al reporte {{report.title}}?');"> Eliminar </a>
        </td>
      </tr>
    {% endfor %}
      </tbody>
  </table>

     <div>
       {# Funcion importada de "paginate.html" en el head #}

       {{ render_paginate(reportes, index_route='report_index')}}
     </div>





    <div class="">
      <a href="{{ url_for('report_new') }}" class="btn btn-success btn-lg"> Nuevo </a>
      <a href="{{ url_for('home') }}" class="btn btn-secondary btn-lg"> Volver </a>
    </div>


{% endblock %}
